<!DOCTYPE html>
<html>

<head>
    <title>HVAC Builder</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" type='text/css' href="/stylesheets/newStyle.css">
</head>

<body>

    <nav id='navTop' class="navbar navbar-expand-sm">
        <ul class="navbar-nav" id='navbar'>
            <img src="/images/CCG_Logo_New.bmp" class="align-self-*-start" alt="CCG LOGO">
            <li class="nav-item">
                <a class="nav-link" id='home' href="/">Get Started</a>
            </li>
            <li class="nav-item">
                <a class='nav-link' id='options' href="/">Projects</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id='points' href='/points'>Contact</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id='loginLink' data-target="#loginForm" data-toggle='collapse'>login</a>
            </li>
            <li class="collapse nav-item" id='loginForm'>

                <label for='userName'>User Name:</label>
                <input type='text' id='userName'>
                <label for='password'>Password:</label>
                <input type='text' id='password'>
                <button id='loginButton' data-toggle='collapse' data-target='#loginForm'
                    onclick='login()'>Submit</button>
                <button id='newUserButton' data-toggle='collapse' data-target='#loginForm' onclick='newuser()'>New
                    User</button>

            </li>
        </ul>
    </nav>
    <div class='row'>
        <div class='container col-sm-3' id='sidebar'>
            <h2>Projects Controls</h2>
            <div class="list-group" id="list-tab" role="tablist">
                <a class="list-group-item list-group-item-action active" id="home-list" data-toggle="list" href="#home"
                    role="tab" aria-controls="home">Home</a>
                <a class="list-group-item list-group-item-action" id="newProject-list" data-toggle="list"
                    href="#newProject" role="tab" aria-controls="newProject">New Project</a>
                <a class="list-group-item list-group-item-action" id="newGroup-list" data-toggle="list" href="#newGroup"
                    role="tab" aria-controls="newGroup">New Group</a>
                <a class="list-group-item list-group-item-action" id="newUnit-list" data-toggle="list" href="#newUnit"
                    role="tab" aria-controls="newUnit">New Unit</a>

            </div>
            <h4>Overview Selector</h4>
        </div>





        <div id='navBottom' class='container col-sm-9'>
            <ul class="nav nav-tabs" id='projectNav'>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb" id='breadcrumb'>
                        <li class='breadcrumb-item active' aria-current="page">Home</li>
                    </ol>
                </nav>
                <li class="nav-item">
                    <a class="nav-link" id='overviewLink' href='/overview'>Overview</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link active" id='optionsLink' href='/options'>Options</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" id='pointsLink' href='/points'>Points</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" id='sequenceLink' href='/sequence'>Sequence</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href='/drawings'>Drawings</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href='/material'>Material</a>
                </li>

            </ul>

            <div class="container">
                <div class="tab-content" id="nav-tabContent">
                    <div class='tab-pane fade show active' id='home' role='tabpanel' aria-labelledby="home-list">
                        <h1>HVAC Builder</h1>
                        <p>Welcome to the CCG Equipment Configurator. LogIn to access
                            saved projects and equipment, or create a new user and start
                            configuring a equipment and organizing a project now! </p>
                    </div>

                    <div class="tab-pane fade" id="newProject" role="tabpanel" aria-labelledby="newProject-list">
                        <label for='newProjectTextbox'>Enter the name for a new project</label>
                        <input type='text' id='newProjectTextbox'>

                        <button type='submit' onclick='createNewProject()'>Submit</button>

                    </div>

                    <div class="tab-pane fade" id="newGroup" role="tabpanel" aria-labelledby="newGroup-list">

                        <label for='newGroupTextbox'>Enter a name for a group</label>
                        <input type='text' id='newGroupTextbox'>
                        <select id='newGroupProjectSelect'>
                            <option value=''>....</option>
                        </select>
                        <button type='submit' id='newGroupSubmit' onclick='addNewGroup()'>Submit</button>
                    </div>

                    <div class="tab-pane fade" id="newUnit" role="tabpanel" aria-labelledby="newUnit-list">

                        <ul class='list-group'>

                            <li class='list-group-item'>
                                <label for="AHUType">Select AHU Style</label>
                                <select id="AHUOptions">
                                    <option value="">Select....</option>
                                    <option value="Constant Volume">Constant Volume</option>
                                    <option value="VAV">VAV</option>
                                </select>
                            </li>

                            <li class='list-group-item'>
                                <label for='ahuName'>Enter the Name of The AHU</label>
                                <input id='ahuName' type='text'>
                            </li>
                            <li class='list-group-item'>
                                <label for='projectSelect'>Select the project for the AHU:</label>
                                <select id='projectSelect'>
                                    <option value=''>Select....</option>
                                </select>
                            </li>
                            <li class='list-group-item'>
                                <label for='groupSelect'>Select the Group</label>
                                <select id='groupSelect'>
                                    <option value=''>Select....</option>
                                </select>
                            </li>
                            <li class='list-group-item'>
                                <label for='ahuSize'>Select the Size of the AHU</label>
                                <select id='ahuSize'>
                                    <option value='small'>Small(0 to 9999k CFM) </option>
                                    <option value='medium'>Medium(10k to 15999k CFM)</option>
                                    <option value='large'>Large (16K to 20k CFM)</option>
                                </select>
                            </li>
                            <li class='list-group-item'>
                                <label for='controllerSelect'>Select the controller manufacturer</label>
                                <select id='controllerSelect'>
                                    <option value='siemens'>Siemens</option>
                                    <option value='carrier'>Carrier</option>
                                    <option value='distech'>Distech</option>
                                    <option value='trane'>Trane</option>
                                </select>
                            </li>
                            <br>
                            <br>
                            <button type='submit' onclick='addAHU()'>Submit new AHU</button>

                        </ul>

                    </div>

                </div>


            </div>
            <div>
                <div id="accordion">
                    <div class="card">
                        <div class="card-header" id="headingOne">
                            <h5 class="mb-0">
                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne"
                                    aria-expanded="true" aria-controls="collapseOne">
                                    Run Conditions
                                </button>
                            </h5>
                        </div>

                        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                            data-parent="#accordion">
                            <div class="card-body">
                                <label for="runCond">Run Conditions</label>
                                <select class="runConditons" id="runConditions" name="runCond">
                                    <option value="ZSSensorWithLinkage">ZS Sensor with Linkage</option>
                                    <option value="WSSensorWithLinkage">WS Sensor with Linkage</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingTwo">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo"
                                    aria-expanded="false" aria-controls="collapseTwo">
                                    safties
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                            <div class="card-body">

                                <label for="safties">Safeties</label>
                                <input id="freezeProtection" type="checkbox" value="1">Freeze Protection
                                <input id="returnAirSmokeDetector" type="checkbox" value="1">Return Air Smoke Detector
                                <input id="supplyAirSmokeDetector" type="checkbox" value="1">Supply Air Smoke Detector

                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingThree">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    Smoke Contorl
                                </button>
                            </h5>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                            data-parent="#accordion">
                            <div class="card-body">
                                <label for="SmokeControl">Smoke Control</label>
                                <input id="fireShutdown" type="checkbox" value="1">Fire Shutdown
                                <input id="evacuation" type="checkbox" value="1">Evacuation
                                <input id="pressurization" type="checkbox" value="1">Pressurization
                                <input id="purge" type="checkbox" name="Purge" value="1">Purge

                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingThree">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                    Outdoor Air Temperature
                                </button>
                            </h5>
                        </div>
                        <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordion">
                            <div class="card-body">
                                <label for="OAT">Outdoor Air Temperature</label>
                                <select id="outdoorAirTemp" name="OAT">
                                    <option value="physicalInput">Physical Input</option>
                                    <option value="networkInput">Network Input</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingFive">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                    Supply Fan
                                </button>
                            </h5>
                        </div>
                        <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-parent="#accordion">
                            <div class="card-body">
                                <label for="SF">Supply Fan</label>
                                <select id="supplyFan" name="SF">
                                    <option value="blowThrough">Blow Through -- On - Off</option>
                                    <option value="drawThrough">Draw Through -- On - Off</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingSix">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseSix"
                                    aria-expanded="false" aria-controls="collapseSix">
                                    VFD
                                </button>
                            </h5>
                        </div>
                        <div id="collapseSix" class="collapse" aria-labelledby="headingSix" data-parent="#accordion">
                            <div class="card-body">
                                <label for="VFD">VFD</label>
                                <input id="vfd" type="checkbox" value="1">Single Zone VFD<br><br>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="headingSeven">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                                    Return Fan
                                </button>
                            </h5>
                        </div>
                        <div id="collapseSeven" class="collapse" aria-labelledby="headingSeven"
                            data-parent="#accordion">
                            <div class="card-body">
                                <label for="ReturnFan">Return Fan</label>
                                <select id="returnFan" name="RF">
                                    <option value="none">None</option>
                                    <option value="onOff">On - Off</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingEight">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                                    Exhaust Fan
                                </button>
                            </h5>
                        </div>
                        <div id="collapseEight" class="collapse" aria-labelledby="headingEight"
                            data-parent="#accordion">
                            <div class="card-body">
                                <label for="EF">Exhaust Fan</label>
                                <select id="exhaustFan" name="EF">
                                    <option value="none">None</option>
                                    <option value="onOff">On - Off</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingNine">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                                    Pre-heating
                                </button>
                            </h5>
                        </div>
                        <div id="collapseNine" class="collapse" aria-labelledby="headingNine" data-parent="#accordion">
                            <div class="card-body">
                                <label for="Preheating">Preheating</label>
                                <select id="preHeating" name="Preheating">
                                    <option value="none">None</option>
                                    <option value="electricStaging">Electric Staging</option>
                                    <option value="SCRElectric">SCR Electric</option>
                                    <option value="hotWaterModulating">Hot Water: Modulating</option>
                                    <option value="hotWaterModulationCoilDeltaT">Hot Water: Modulating Coil Delta T
                                    </option>
                                    <option value="hotWaterExternalFaceAndBypass">Hot Water: External Face and Bypass
                                    </option>
                                    <option value="hotWaterInternalFaceAndBypass">Hot Water: Internal Face and Bypass
                                    </option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingTen">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTen"
                                    aria-expanded="false" aria-controls="collapseTen">
                                    Face and Bypass Dampers
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTen" class="collapse" aria-labelledby="headingTen" data-parent="#accordion">
                            <div class="card-body">
                                <label for="FaceBypassD">Face and Bypass Dampers</label>
                                <select id="faceAndBypassDampers" name="FaceBypassD">
                                    <option value="none">None</option>
                                    <option value="external">External Bypass</option>
                                    <option value="internal">Internal Bypass</option>
                                </select><br><br>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingEleven">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseEleven" aria-expanded="false" aria-controls="collapseEleven">
                                    Heating
                                </button>
                            </h5>
                        </div>
                        <div id="collapseEleven" class="collapse" aria-labelledby="headingEleven"
                            data-parent="#accordion">
                            <div class="card-body">
                                <label for="Heating">Heating</label>
                                <select name="Heating" id="heating">
                                    <option value="none">None</option>
                                    <option value="electricStaging1">Electric Staging 1</option>
                                    <option value="electricStaging2">Electric Staging 2</option>
                                    <option value="electricStaging3">Electric Staging 3</option>
                                    <option value="electricStaging4">Electric Staging 4</option>
                                    <option value="electricStaging5">Electric Staging 5</option>
                                    <option value="electricStaging6">Electric Staging 6</option>
                                    <option value="gasStaging1">Gas Staging 1</option>
                                    <option value="gasStaging2">Gas Staging 2</option>
                                    <option value="gasStaging3">Gas Staging 3</option>
                                    <option value="gasStaging4">Gas Staging 4</option>
                                    <option value="gasStaging5">Gas Staging 5</option>
                                    <option value="gasStaging6">Gas Staging 6</option>
                                    <option value="SCRElectric">SCR Electric</option>
                                    <option value="hotWaterModulating">Hot Water: Modulating</option>
                                    <option value="hotWaterExternalFaceAndBypass">Hot Water: External Face and Bypass
                                    </option>
                                    <option value="hotWaterInternalFaceAndBypass">Hot Water: Internal Face and Bypass
                                    </option>
                                    <option value="hotWaterIntegralFaceAndBypass">Hot Water: Integral Face and Bypass
                                    </option>
                                    <option value="steamModulating">Steam: Modulating</option>
                                    <option value="steamExternalFaceBypass">Steam: External Face and Bypass</option>
                                    <option value="steamInternalFaceAndBypass">Steam: Internal Face and Bypass</option>
                                    <option value="steamIntegralFaceAndBypass">Steam: Integral Face and Bypass</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="headingTwelve">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse"
                                    data-target="#collapseTwelve" aria-expanded="false" aria-controls="collapseTwelve">
                                    Cooling
                                </button>
                            </h5>
                        </div>
                        <div id="collapseTwelve" class="collapse" aria-labelledby="headingTwelve"
                            data-parent="#accordion">
                            <div class="card-body">
                                <label for="Cooling">Cooling</label>
                                <select id="cooling" name="Cooling">
                                    <option value="none">None</option>
                                    <option value="dXCooling">Dx Cooling</option>
                                    <option value="chilledWaterModulating">Chilled Water: Modulating</option>
                                    <option value="chilledWaterModulatingCoilDeltaT">Chilled Water: Modulating Coil
                                        Delta T</option>
                                    <option value="chilledWaterExternalFaceBypass">Chilled Water: External Face and
                                        Bypass</option>
                                    <option value="chilledWaterInternalFaceBypass">Chilled Water: Internal Face and
                                        Bypass</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="heading13">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse13"
                                    aria-expanded="false" aria-controls="collapse13">
                                    Mixed Air Damper
                                </button>
                            </h5>
                        </div>
                        <div id="collapse13" class="collapse" aria-labelledby="heading13" data-parent="#accordion">
                            <div class="card-body">
                                <label for="MAD">Mixed Air Dampers</label>
                                <select id="mixedAirDamper" name="MAD">
                                    <option value="none">None</option>
                                    <option value="economizerOAEnthalpySwitch">Economizer: OA Enthalpy Switch</option>
                                    <option value="economizerOAEnthalpySensor">Economizer: OA Enthalpy Sensor</option>
                                    <option value="economizerOADifferentialEnthalpy">Economizer: OA Differential
                                        Enthalpy</option>
                                    <option value="economizerOADryBulb">Economizer: OA Dry Bulb</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="heading14">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse14"
                                    aria-expanded="false" aria-controls="collapse14">
                                    Minimum Outside Air
                                </button>
                            </h5>
                        </div>
                        <div id="collapse14" class="collapse" aria-labelledby="heading14" data-parent="#accordion">
                            <div class="card-body">
                                <label for="mOA">Minimum Outside Air</label>
                                <select id="minOutsideAir" name="mOA">
                                    <option value="none">None</option>
                                    <option value="differentialCO2">Differential CO2</option>
                                    <option value="returnSpaceCO2">Return/Space CO2</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header" id="heading15">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse15"
                                    aria-expanded="false" aria-controls="collapse15">
                                    Mixed Air Damper
                                </button>
                            </h5>
                        </div>
                        <div id="collapse15" class="collapse" aria-labelledby="heading15" data-parent="#accordion">
                            <div class="card-body">
                                <label for="MAD">Mixed Air Dampers</label>
                                <select id="mixedAirDamper" name="MAD">
                                    <option value="none">None</option>
                                    <option value="economizerOAEnthalpySwitch">Economizer: OA Enthalpy Switch</option>
                                    <option value="economizerOAEnthalpySensor">Economizer: OA Enthalpy Sensor</option>
                                    <option value="economizerOADifferentialEnthalpy">Economizer: OA Differential
                                        Enthalpy</option>
                                    <option value="economizerOADryBulb">Economizer: OA Dry Bulb</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="heading16">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse16"
                                    aria-expanded="false" aria-controls="collapse16">
                                    Humidity Control
                                </button>
                            </h5>
                        </div>
                        <div id="collapse16" class="collapse" aria-labelledby="heading16" data-parent="#accordion">
                            <div class="card-body">
                                <label for="humidityControl">Humiditiy Control</label>
                                <input id="humidityControl" type="checkbox" name="humdidtyControl">Dehumidification
                                <br><br>
                                <label for="humidifier">Humidifier</label>
                                <select id="humidifier" name="humidifier">
                                    <option value="none">None</option>
                                    <option value="SS">Humidifier SS</option>
                                    <option value="sSAndModulation">Humidifier SS and Modulation</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="heading17">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse17"
                                    aria-expanded="false" aria-controls="collapse17">
                                    Mixed Monitoring
                                </button>
                            </h5>
                        </div>
                        <div id="collapse17" class="collapse" aria-labelledby="heading17" data-parent="#accordion">
                            <div class="card-body">
                                <label for="RARH">Misc Monitoring</label>
                                <input id="RARH" type="checkbox" name="RARH">Return Air Relative Humidity<br>
                                <input id="OARH" type="checkbox" name="OARH">Outdoor Air
                                Relative Humidity
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header" id="heading18">
                            <h5 class="mb-0">
                                <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapse18"
                                    aria-expanded="false" aria-controls="collapse18">
                                    Filter Monitoring
                                </button>
                            </h5>
                        </div>
                        <div id="collapse18" class="collapse" aria-labelledby="heading18" data-parent="#accordion">
                            <div class="card-body">
                                <label for="f1M">Filter 1 Monitoring</label>
                                <select id="filterOneMonitoring" name="f1M">
                                    <option value="none">None</option>
                                    <option value="hours">Hours</option>
                                    <option value="status">Status</option>
                                    <option value="differentialPressure">Differential Pressure</option>
                                </select>
                                <br><br>
                                <label for="f2M">Filter 2 Monitoring</label>
                                <select id="filterTwoMonitoring" name="f2M">
                                    <option value="none">None</option>
                                    <option value="hours">Hours</option>
                                    <option value="status">Status</option>
                                    <option value="differentialPressure">Differential Pressure</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>



                <button onclick="submitCV()">Generate Points List and Seqence</button>
            </div>
        </div>
</body>
<script>
    $(document).ready(function () {
        var user = sessionStorage.getItem('user');
        var userID = sessionStorage.getItem('userID');
        if (user != undefined) {
            var url = document.URL;
            var n = url.lastIndexOf('/');
            var ahuName = url.substring((n + 1), url.length);

            var projects = JSON.parse(sessionStorage.getItem('projects'));
            updateSidebar();
            getURL();
            var link = getLink();
            var temp = document.getElementById('optionsLink');
            console.log(link);
            if (link) {
                console.log('set link stuff');
                temp.setAttribute('href', '/options' + link);
                temp = document.getElementById('pointsLink');
                temp.setAttribute('href', '/points' + link);
                temp = document.getElementById('sequenceLink');
                temp.setAttribute('href', '/sequence' + link);
                temp = document.getElementById('overviewLink');
                temp.setAttribute('href', '/overview' + link);

            }
            temp = document.getElementById('loginLink');
            temp.textContent = user;
            var topNode = document.getElementById('navbar');
            var newNode = document.createElement('li');
            var newButton = document.createElement('a');
            newNode.className = 'nav-item';
            topNode.appendChild(newNode);

            newButton.setAttribute('onclick', 'logOut()');
            newButton.textContent = 'LogOut';
            newButton.className = 'nav-link';
            newNode.appendChild(newButton);

        } else {

        }
    });

    function addNewSideBarItem(name, name2, project, topNode) {
        var newListItem = document.createElement('li');
        newListItem.className = 'list-group-item';
        topNode.appendChild(newListItem);
        var newA = document.createElement('a');
        newA.textContent = project.name;
        newListItem.appendChild(newA);
        newA.id = project.name;
        newA.className = 'list-group-item';

        //newA.setAttribute('data-toggle', 'collapse');

        var newUL = document.createElement('ul');
        if (name == null) {
            //  newA.setAttribute('data-target', '#' + project.name + 'List');
            newUL.id = project.name + 'List';
            newA.setAttribute('href', '/overview/project/' + project.name);

        } else {
            //  newA.setAttribute('data-target', '#' + name + project.name + 'List');
            newUL.id = name + project.name + 'List';
            newA.setAttribute('href', '/overview/project/' + name + '/group/' + project.name);

        }
        if (name2 != null) {
            newA.setAttribute('href', '/overveiw/project/' + name2 + '/group/' + name + '/unit/' + project.name);
        }

        newUL.className = 'list-group';

        newListItem.appendChild(newUL);
        return newUL;
    }


    function updateSidebar() {
        var topNode = document.getElementById('sidebar');
        //topNode.childNodes.remove();

        var projects = JSON.parse(sessionStorage.getItem('projects'));

        var groups = JSON.parse(sessionStorage.getItem('groups'));

        var units = JSON.parse(sessionStorage.getItem('units'));
        console.log(projects);
        console.log(groups);
        console.log(units);
        var topNode = document.getElementById('sidebar');
        var newNode = document.createElement('ul');
        newNode.className = 'list-group';
        topNode.appendChild(newNode);
        while (projects.length > 0) {
            var tempProject = projects.shift();
            var newUL = addNewSideBarItem(null, null, tempProject, newNode);

            for (var x = 0; x < groups.length; x++) {
                var tempGroup = groups[x];
                if (tempGroup.project == tempProject._id) {
                    var nextUL = addNewSideBarItem(tempProject.name, null, tempGroup, newUL);

                    for (var y = 0; y < units.length; y++) {
                        var tempUnit = units[y];
                        if (tempUnit.group == tempGroup._id) {
                            var dump = addNewSideBarItem(tempGroup.name, tempProject.name, tempUnit, nextUL);
                        }
                    }

                }

            }
        }
    }
    function newuser() {
        var tempUserName = document.getElementById('userName').value;
        var tempPassword = document.getElementById('password').value;
        $.post('/newuser', { tempUserName, tempPassword }, function (data, status) {
            console.log(data.auth);
        });
    }
    function getLink() {
        var tempP = document.getElementById('projectSlice');
        var link = "";
        if (tempP != undefined) {
            link = '/project/' + tempP.innerText;
            var tempG = document.getElementById('groupSlice');
            link = link + '/group/' + tempG.innerText;
            if (tempG != undefined) {
                var tempU = document.getElementById('unitSlice');
                link = link + tempU.innerText;
            }
        }

        return link;
    }

    function login() {
        var tempUserName = document.getElementById('userName').value;
        var tempPassword = document.getElementById('password').value;

        var temp = document.getElementById('loginLink');
        $.post('/login', { tempUserName, tempPassword }, function (data, status) {
            console.log(data.auth);
            if (data.auth == true) {
                temp.textContent = tempUserName;
                sessionStorage.setItem('user', tempUserName);
                sessionStorage.setItem('userID', data.userID);
                updateSidebar();

            } else {
                alert('login failed!');
            }
        });
    }

    function logOut() {
        sessionStorage.clear();
        console.log('seesion storage cleared');

    }
    function getLink() {
        var tempP = document.getElementById('projectSlice');
        var link = "";
        if (tempP != null) {
            link = '/project/' + tempP.innerText;
            var tempG = document.getElementById('groupSlice');


            if (tempG != null) {
                link = link + '/group/' + tempG.innerText;
                var tempU = document.getElementById('unitSlice');
                if (tempU != null) {
                    link = link + '/unit/' + tempU.innerText;
                }

            }
        } else {
            return false;
        }

        return link;
    }


    function getURL() {
        var url = document.URL;
        var iProject = url.indexOf('project');
        var iGroup = url.indexOf('group');
        var iUnit = url.indexOf('unit');
        var projectName;
        var groupName;
        var unitName;
        if (iProject != -1) {
            //get project name
            if (iGroup != -1) {
                //get group name
                if (iUnit != -1) {
                    //get unit name;
                    var i = url.lastIndexOf('/');
                    i++;
                    unitName = url.substring(i, url.length);
                    i = i - 6;
                    var g = iGroup + 6;
                    groupName = url.substring(g, iUnit - 1);
                    var p = iProject + 8;
                    projectName = url.substring(p, iGroup - 1);
                    console.log(unitName, groupName, projectName);
                    breadCrumb(projectName, groupName, unitName);
                } else {
                    var i = iGroup + 6;
                    groupName = url.substring(i, url.length);
                    var p = iProject + 8;
                    projectName = url.substring(p, iGroup - 1);
                    console.log(groupName, projectName);
                    breadCrumb(projectName, groupName, null);
                }
            } else {
                var i = iProject + 8;
                projectName = url.substring(i, url.length);
                console.log(projectName);
                breadCrumb(projectName, null, null);
            }
        } else {
            console.log('no project!!');
        }
    }

    function breadCrumb(p, g, u) {
        var tempNode = document.createElement('li');
        tempNode.className = 'breadcrumb-item';
        var topNode = document.getElementById('breadcrumb');
        topNode.appendChild(tempNode);
        tempNode.textContent = p;
        tempNode.id = 'projectSlice';
        if (g != null) {
            tempNode = document.createElement('li');
            tempNode.className = 'breadcrumb-item';
            topNode.appendChild(tempNode);
            tempNode.textContent = g;
            tempNode.id = 'groupSlice';
            if (u != null) {
                tempNode = document.createElement('li');
                tempNode.className = 'breadcrumb-item';
                topNode.appendChild(tempNode);
                tempNode.textContent = u;
                tempNode.id = 'unitSlice';
            }
        }
    }

    function getUnitOptionsModel() {
        var projectName = document.getElementById('projectSlice').innerText;
        var groupName = document.getElementById('groupSlice').innerText;
        var unitName = document.getElementById('unitSlice').innerText;
        var projects = JSON.parse(sessionStorage.getItem('projects'));
        var groups = JSON.parse(sessionStorage.getItem('groups'));
        var units = JSON.parse(sessionStorage.getItem('units'));
        var project = project.name;
        var group = groups.name;
        var unit = units.name;
        if (unit.type == 'cv') {

        }
    }

    function submitCV() {

        $.get('/cvModel', function (data, status) {
            console.log(data);
            var cv = data.ahu;
            console.log(JSON.stringify(cv));
            var x = document.getElementById('runConditions');
            var v = x.selectedIndex;
            if (v == 0) {
                cv.runConditions.ZSSensorWithLinkage.isUsed = true;

            } else if (v == 1) {

                cv.runConditions.WSSensorWithLinkage.isUsed = true;
            }
            x = document.getElementById('freezeProtection');
            if (x.checked == true) {
                cv.safties.freezeProtection.isUsed = true;
            }
            x = document.getElementById('returnAirSmokeDetector');
            if (x.checked == true) {
                cv.safties.returnAirSmokeDetector.isUsed = true;
            }
            x = document.getElementById('supplyAirSmokeDetector');
            if (x.checked == true) {
                cv.safties.supplyAirSmokeDetector.isUsed = true;
            }
            x = document.getElementById('fireShutdown');
            if (x.checked == true) {
                cv.smokeControl.fireShutdown.isUsed = true;
            }
            x = document.getElementById('evacuation');
            if (x.checked == true) {
                cv.smokeControl.evacuation.isUsed = true;
            }
            x = document.getElementById('pressurization');
            if (x.checked == true) {
                cv.smokeControl.pressurization.isUsed = true;
            }
            x = document.getElementById('purge');
            if (x.checked == true) {
                cv.smokeControl.purge.isUsed = true;
            }
            x = document.getElementById('outdoorAirTemp');
            v = x.selectedIndex;
            if (v == 0) {
                cv.outdoorAirTemp.physicalInput.isUsed = true;

            } else if (v == 1) {

                cv.outdoorAirTemp.networkInput.isUsed = true;
            }
            x = document.getElementById('supplyFan');
            v = x.selectedIndex;
            if (v == 0) {
                cv.supplyFan.blowThrough.isUsed = true;

            } else if (v == 1) {

                cv.supplyFan.drawThrough.isUsed = true;
            }
            x = document.getElementById('vfd');
            if (x.checked == true) {
                cv.vfd.isUsed = true;
            } else {
                cv.vfd.isUsed = false;
            }
            x = document.getElementById('returnFan');
            v = x.selectedIndex;
            if (v == 0) {
                cv.returnFan.none.isUsed = true;

            } else if (v == 1) {

                cv.returnFan.onOff.isUsed = true;
            }
            x = document.getElementById('exhaustFan');
            v = x.selectedIndex;
            if (v == 0) {
                cv.exhaustFan.none = true;
            } else if (v == 1) {

                cv.exhaustFan.onOff.isUsed = true;
            }
            x = document.getElementById('preHeating');
            v = x.selectedIndex;
            if (v == 0) {
                cv.preHeating.none.isUsed = true;


            } else if (v == 1) {

                cv.preHeating.electricStaging.isUsed = true;

            } else if (v == 2) {

                cv.preHeating.SCRElectric.isUsed = true;

            } else if (v == 3) {

                cv.preHeating.hotWaterModulating.isUsed = true;

            } else if (v == 4) {

                cv.preHeating.hotWaterFaceBypass.isUsed = true;

            } else if (v == 5) {
                cv.preHeating.steamModulating.isUsed = true;
            } else if (v == 6) {
                cv.preHeating.none = 0;

                cv.preHeating.steamFaceBypass.isUsed = true;
            }
            x = document.getElementById('faceAndBypassDampers');
            v = x.selectedIndex;
            if (v == 0) {
                cv.faceAndBypassDampers.none.isUsed = true;

            } else if (v == 1) {
                cv.faceAndBypassDampers.external.isUsed = true;

            } else if (v == 2) {
                cv.faceAndBypassDampers.internal.isUsed = true;
            }
            x = document.getElementById('heating').selectedIndex;
            if (x == 0) {
                cv.heating.none.isUsed = true;
            } else if (x == 1) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 1;
            } else if (x == 2) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 2;

            } else if (x == 3) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 3;
            } else if (x == 4) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 4;
            } else if (x == 5) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 5;
            } else if (x == 6) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 6;
            } else if (x == 7) {

                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 1;
            } else if (x == 8) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 2;
            } else if (x == 9) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 3;
            } else if (x == 10) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 4;
            } else if (x == 11) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 5;
            } else if (x == 12) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 6;
            } else if (x == 13) {

                cv.heating.SCRElectric.isUsed = true;

            } else if (x == 14) {

                cv.heating.hotWaterModulating.isUsed = true;

            } else if (x == 15) {

                cv.heating.hotWaterExternalFaceAndBypass.isUsed = true;

            } else if (x == 16) {

                cv.heating.hotWaterInternalFaceAndBypass.isUsed = true;

            } else if (x == 17) {

                cv.heating.hotWaterIntegralFaceAndBypass.isUsed = true;

            } else if (x == 18) {

                cv.heating.steamModulating.isUsed = true;

            } else if (x == 19) {

                cv.heating.steamExternalFaceBypass.isUsed = true;

            } else if (x == 20) {

                cv.heating.steamInternalFaceAndBypass.isUsed = true;

            } else if (x == 21) {

                cv.heating.steamIntegralFaceAndBypass.isUsed = 1;
            }
            x = document.getElementById('cooling').selectedIndex;
            if (x == 0) {
                cv.cooling.none.isUsed = true;

            } else if (x == 1) {

                cv.cooling.dXCooling.isUsed = true;
                cv.cooling.dXCooling.points.stages = 1;
            } else if (x == 2) {

                cv.cooling.chilledWaterModulating.isUsed = true;

            } else if (x == 3) {

                cv.cooling.chilledWaterModulatingCoilDeltaT.isUsed = true;

            } else if (x == 4) {

                cv.cooling.chilledWaterExternalFaceBypass.isUsed = true;

            } else if (x == 5) {

                cv.cooling.chilledWaterInternalFaceBypass.isUsed = true;
            }
            x = document.getElementById('mixedAirDamper').selectedIndex;
            if (x == 0) {
                cv.mixedAirDamper.none.isUsed = true;

            } else if (x == 1) {
                cv.mixedAirDamper.economizerOAEnthalpySwitch.isUsed = true
            } else if (x == 2) {


                cv.mixedAirDamper.economizerOAEnthalpySensor.isUsed = true;

            } else if (x == 3) {

                cv.mixedAirDamper.economizerOADifferentialEnthalpy.isUsed = true;

            } else if (x == 4) {

                cv.mixedAirDamper.economizerOADryBulb.isUsed = true;
            }
            x = document.getElementById('minOutsideAir').selectedIndex;
            if (x == 0) {
                cv.minOutsideAir.none.isUsed = true;

            } else if (x == 1) {

                cv.minOutsideAir.differentialCO2.isUsed = true;

            } else if (x == 2) {

                cv.minOutsideAir.returnSpaceCO2.isUsed = true;
            }
            x = document.getElementById('humidityControl');
            if (x.checked == true) {
                cv.humidityControl.isUsed = true;
            } else {
                cv.humidityControl.isUsed = false;
            }
            x = document.getElementById('humidifier').selectedIndex;
            if (x == 0) {
                cv.humidifier.none.isUsed = true;

            } else if (x == 1) {

                cv.humidifier.SS.isUsed = true;

            } else if (x == 2) {

                cv.humidifier.sSAndModulation.isUsed = true;
            }
            x = document.getElementById('RARH');
            if (x.checked == true) {
                cv.RARH.isUsed = true;
            } else {
                cv.RARH.isUsed = false;
            }
            x = document.getElementById('OARH');
            if (x.checked == true) {
                cv.OARH.isUsed = true;
            } else {
                cv.OARH.isUsed = false;
            }
            x = document.getElementById('filterOneMonitoring').selectedIndex;
            if (x == 0) {
                cv.filterOneMonitoring.none.isUsed = true;

            } else if (x == 1) {

                cv.filterOneMonitoring.hours.isUsed = true;

            } else if (x == 2) {

                cv.filterOneMonitoring.status.isUsed = true;

            } else if (x == 3) {

                cv.filterOneMonitoring.differentialPressure.isUsed = true;
            }
            x = document.getElementById('filterTwoMonitoring').selectedIndex;
            if (x == 0) {
                cv.filterTwoMonitoring.none.isUsed = true;

            } else if (x == 1) {

                cv.filterTwoMonitoring.hours.isUsed = true;

            } else if (x == 2) {

                cv.filterTwoMonitoring.status.isUsed = true;

            } else if (x == 3) {

                cv.filterTwoMonitoring.differentialPressure.isUsed = true;
            }
            console.log(JSON.stringify(cv));
            localStorage.setItem('ahu', JSON.stringify(cv));
            var project = JSON.parse(localStorage.getItem('project'));
            var abc = document.getElementById('selectAHU').selectedIndex;
            console.log(project);
            console.log(abc);
            project.units[abc - 1].points = cv;

            localStorage.setItem('Options', JSON.stringify(project));

        });
    }

</script>

</html>