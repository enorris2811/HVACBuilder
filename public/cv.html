<!DOCTYPE html>
<html>

<head>
    <title>Constant Volume</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>

<body>
    <nav class="navbar navbar-top">
        <div class="container-fluid">
            <ul class="nav navbar-nav inline">
                <li class="nav-item active inline"> <a class="nav-link" href="/">Home</a></li>
                <li class="nav-item inline"><a class="nav-link" href="/points">Points</a></li>
                <li class="nav-item inline"><a class="nav-link" href="/sequence">Sequence</a></li>
            </ul>
        </div>
    </nav>
</body>
<h1>Constant Volume</h1>
<form><label for="runCond">Run Conditions</label><select class="runConditons" id="runConditions" name="runCond">
        <option value="1">ZS Sensor with Linkage</option>
        <option value="1">WS Sensor with Linkage</option>
    </select>
    <br><br>
    <label for="safties">Safeties</label>
    <input id="freezeProtection" type="checkbox" value="1">Freeze Protection
    <input id="RASmokeDetector" type="checkbox" value="1">Return Air Smoke Detector
    <input id="SASmokeDetector" type="checkbox" value="1">Supply Air Smoke Detector
    <br><br>
    <label for="SmokeControl">Smoke Control</label>
    <input id="fireShutdown" type="checkbox" value="1">Fire Shutdown
    <input id="evacuation" type="checkbox" value="1">Evacuation
    <input id="pressurization" type="checkbox" value="1">Pressurization
    <input id="purge" type="checkbox" name="Purge" value="1">Purge
    <br><br>
    <label for="OAT">Outdoor Air Temperature</label>
    <select id="outdoorAirTemp" name="OAT">
        <option value="1">Physical Input</option>
        <option value="1">Network Input</option>
    </select><br><br>
    <label for="SF">Supply Fan</label>
    <select id="supplyFan" name="SF">
        <option value="1">Blow Through -- On - Off</option>
        <option value="1">Draw Through -- On - Off</option>
    </select>
    <br><br>
    <label for="VFD">VFD</label>
    <input id="vFD" type="checkbox" value="1">Single Zone VFD<br><br>
    <label for="ReturnFan">Return Fan</label>
    <select id="returnFan" name="RF">
        <option value="1">None</option>
        <option value="1">On - Off</option>
    </select><br><br>
    <label for="EF">Exhaust Fan</label>
    <select id="exhaustFan" name="EF">
        <option value="1">None</option>
        <option value="1">On - Off</option>
    </select><br><br>
    <label for="Preheating">Preheating</label>
    <select id="preHeating" name="Preheating">
        <option value="0">None</option>
        <option value="1">Electric Staging</option>
        <option value="2">SCR Electric</option>
        <option value="3">Hot Water: Modulating</option>
        <option value="4">Hot Water: Modulating Coil Delta T</option>
        <option value="5">Hot Water: External Face and Bypass</option>
        <option value="6">Hot Water: Internal Face and Bypass</option>
    </select><br><br>
    <label for="FaceBypassD">Face and Bypass Dampers</label>
    <select id="faceAndBypassDampers" name="FaceBypassD">
        <option value="0">None</option>
        <option value="1">External Bypass</option>
        <option value="2">Internal Bypass</option>
    </select><br><br>
    <label for="Heating">Heating</label>
    <select name="Heating" id="heating">
        <option value="0">None</option>
        <option value="1">Electric Staging 1</option>
        <option value="2">Electric Staging 2</option>
        <option value="3">Electric Staging 3</option>
        <option value="4">Electric Staging 4</option>
        <option value="5">Electric Staging 5</option>
        <option value="6">Electric Staging 6</option>
        <option value="7">Gas Staging 1</option>
        <option value="8">Gas Staging 2</option>
        <option value="9">Gas Staging 3</option>
        <option value="10">Gas Staging 4</option>
        <option value="11">Gas Staging 5</option>
        <option value="12">Gas Staging 6</option>
        <option value="13">SCR Electric</option>
        <option value="14">Hot Water: Modulating</option>
        <option value="15">Hot Water: External Face and Bypass</option>
        <option value="16">Hot Water: Internal Face and Bypass</option>
        <option value="17">Hot Water: Integral Face and Bypass</option>
        <option value="18">Steam: Modulating</option>
        <option value="19">Steam: External Face and Bypass</option>
        <option value="20">Steam: Internal Face and Bypass</option>
        <option value="21">Steam: Integral Face and Bypass</option>
    </select>
    <br><br>
    <label for="Cooling">Cooling</label>
    <select id="cooling" name="Cooling">
        <option value="0">None</option>
        <option value="1">Dx Cooling</option>
        <option value="2">Chilled Water: Modulating</option>
        <option value="3">Chilled Water: Modulating Coil Delta T</option>
        <option value="4">Chilled Water: External Face and Bypass</option>
        <option value="5">Chilled Water: Internal Face and Bypass</option>
    </select>
    <br><br>
    <label for="MAD">Mixed Air Dampers</label>
    <select id="mixedAirDamper" name="MAD">
        <option value="1">None</option>
        <option value="1">Economizer: OA Enthalpy Switch</option>
        <option value="1">Economizer: OA Enthalpy Sensor</option>
        <option value="1">Economizer: OA Differential Enthalpy</option>
        <option value="1">Economizer: OA Dry Bulb</option>
    </select>
    <br><br>
    <label for="mOA">Minimum Outside Air</label>
    <select id="minOutsideAir" name="mOA">
        <option value="1">None</option>
        <option value="1">Differential CO2</option>
        <option value="1">Return/Space CO2</option>
    </select>
    <br><br>
    <label for="humidityControl">Humiditiy Control</label>
    <input id="humidityControl" type="checkbox" name="humdidtyControl">Dehumidification
    <br><br>
    <label for="humidifier">Humidifier</label>
    <select id="humidifier" name="humidifier">
        <option value="1">None</option>
        <option value="1">Humidifier SS</option>
        <option value="1">Humidifier SS and Modulation</option>
    </select>
    <br><br>
    <label for="RARH">Misc Monitoring</label>
    <input id="RARH" type="checkbox" name="RARH">Return Air Relative Humidity<br>
    <input id="OARH" type="checkbox" name="OARH">Outdoor Air
    Relative Humidity
    <br><br>
    <label for="f1M">Filter 1 Monitoring</label>
    <select id="filterOneMonitoring" name="f1M">
        <option value="1">None</option>
        <option value="1">Hours</option>
        <option value="1">Status</option>
        <option value="1">Differential Pressure</option>
    </select>
    <br><br>
    <label for="f2M">Filter 2 Monitoring</label>
    <select id="filterTwoMonitoring" name="f2M">
        <option value="1">None</option>
        <option value="1">Hours</option>
        <option value="1">Status</option>
        <option value="1">Differential Pressure</option>
    </select>
    <br><br>
</form>
<button onclick="submitCV()">Submit</button>
<script>

    function submitCV() {

        $.get('/cvModel', function (data, status) {
            console.log(data);
            var cv = data.ahu;
            console.log(JSON.stringify(cv));
            var x = document.getElementById('runConditions');
            var v = x.selectedIndex;
            if (v == 0) {
                cv.runConditions.ZSSensorWithLinkage.isUsed = true;

            } else if (v == 1) {

                cv.runConditions.WSSensorWithLinkage.isUsed = true;
            }
            x = document.getElementById('freezeProtection');
            if (x.checked == true) {
                cv.safties.freezeProtection.isUsed = true;
            }
            x = document.getElementById('RASmokeDetector');
            if (x.checked == true) {
                cv.safties.returnAirSmokeDetector.isUsed = true;
            }
            x = document.getElementById('SASmokeDetector');
            if (x.checked == true) {
                cv.safties.supplyAirSmokeDetector.isUsed = true;
            }
            x = document.getElementById('fireShutdown');
            if (x.checked == true) {
                cv.smokeControl.fireShutdown.isUsed = true;
            }
            x = document.getElementById('evacuation');
            if (x.checked == true) {
                cv.smokeControl.Evacuation.isUsed = true;
            }
            x = document.getElementById('pressurization');
            if (x.checked == true) {
                cv.smokeControl.Pressurization.isUsed = true;
            }
            x = document.getElementById('purge');
            if (x.checked == true) {
                cv.smokeControl.Purge.isUsed = true;
            }
            x = document.getElementById('outdoorAirTemp');
            v = x.selectedIndex;
            if (v == 0) {
                cv.outdoorAirTemp.physicalInput.isUsed = true;

            } else if (v == 1) {

                cv.outdoorAirTemp.networkInput.isUsed = true;
            }
            x = document.getElementById('supplyFan');
            v = x.selectedIndex;
            if (v == 0) {
                cv.supplyFan.blowThrough.isUsed = true;

            } else if (v == 1) {

                cv.supplyFan.drawThrough.isUsed = true;
            }
            x = document.getElementById('vFD');
            if (x.checked == true) {
                cv.vfd.isUsed = true;
            } else {
                cv.vfd.isUsed = false;
            }
            x = document.getElementById('returnFan');
            v = x.selectedIndex;
            if (v == 0) {
                cv.returnFan.none.isUsed = true;

            } else if (v == 1) {

                cv.returnFan.onOff.isUsed = true;
            }
            x = document.getElementById('exhaustFan');
            v = x.selectedIndex;
            if (v == 0) {

            } else if (v == 1) {

                cv.exhaustFan.onOff.isUsed = true;
            }
            x = document.getElementById('preHeating');
            v = x.selectedIndex;
            if (v == 0) {
                cv.preHeating.none.isUsed = true;


            } else if (v == 1) {

                cv.preHeating.electricStaging.isUsed = true;

            } else if (v == 2) {

                cv.preHeating.SCRElectric.isUsed = true;

            } else if (v == 3) {

                cv.preHeating.hotWaterModulating.isUsed = true;

            } else if (v == 4) {

                cv.preHeating.hotWaterFaceBypass.isUsed = true;

            } else if (v == 5) {
                cv.preHeating.steamModulating.isUsed = true;
            } else if (v == 6) {
                cv.preHeating.none = 0;

                cv.preHeating.steamFaceBypass.isUsed = true;
            }
            x = document.getElementById('faceAndBypassDampers');
            v = x.selectedIndex;
            if (v == 0) {
                cv.faceBypassDampers.none.isUsed = true;

            } else if (v == 1) {
                cv.faceBypassDampers.external.isUsed = true;

            } else if (v == 2) {
                cv.faceBypassDampers.internal.isUsed = true;
            }
            x = document.getElementById('heating').selectedIndex;
            if (x == 0) {
                cv.heating.none.isUsed = true;
            } else if (x == 1) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 1;
            } else if (x == 2) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 2;

            } else if (x == 3) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 3;
            } else if (x == 4) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 4;
            } else if (x == 5) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 5;
            } else if (x == 6) {

                cv.heating.electricStaging.isUsed = true;
                cv.heating.electricStaging.points.stages = 6;
            } else if (x == 7) {

                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 1;
            } else if (x == 8) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 2;
            } else if (x == 9) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 3;
            } else if (x == 10) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 4;
            } else if (x == 11) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 5;
            } else if (x == 12) {
                cv.heating.gasStage.isUsed = true;
                cv.heating.gasStage.points.stages = 6;
            } else if (x == 13) {

                cv.heating.SCRElectric.isUsed = true;

            } else if (x == 14) {

                cv.heating.hotWaterModulating.isUsed = true;

            } else if (x == 15) {

                cv.heating.hotWaterExternalFaceAndBypass.isUsed = true;

            } else if (x == 16) {

                cv.heating.hotWaterInternalFaceAndBypass.isUsed = true;

            } else if (x == 17) {

                cv.heating.hotWaterIntegralFaceAndBypass.isUsed = true;

            } else if (x == 18) {

                cv.heating.steamModulating.isUsed = true;

            } else if (x == 19) {

                cv.heating.steamExternalFaceBypass.isUsed = true;

            } else if (x == 20) {

                cv.heating.steamInternalFaceAndBypass.isUsed = true;

            } else if (x == 21) {

                cv.heating.steamIntegralFaceAndBypass.isUsed = 1;
            }
            x = document.getElementById('cooling').selectedIndex;
            if (x == 0) {
                cv.cooling.none.isUsed = true;

            } else if (x == 1) {

                cv.cooling.dXCooling.isUsed = true;
                cv.cooling.dXCooling.points.stages = 1;
            } else if (x == 2) {

                cv.cooling.chilledWaterModulating.isUsed = true;

            } else if (x == 3) {

                cv.cooling.chilledWaterModulatingCoilDeltaT.isUsed = true;

            } else if (x == 4) {

                cv.cooling.chilledWaterExternalFaceBypass.isUsed = true;

            } else if (x == 5) {

                cv.cooling.chilledWaterInternalFaceBypass.isUsed = true;
            }
            x = document.getElementById('mixedAirDamper').selectedIndex;
            if (x == 0) {
                cv.mixedAirDamper.none.isUsed = true;

            } else if (x == 1) {
                cv.mixedAirDamper.economizerOAEnthalpySwitch.isUsed = true
            } else if (x == 2) {


                cv.mixedAirDamper.economizerOAEnthalpySensor.isUsed = true;

            } else if (x == 3) {

                cv.mixedAirDamper.economizerOADifferentialEnthalpy.isUsed = true;

            } else if (x == 4) {

                cv.mixedAirDamper.economizerOADryBulb.isUsed = true;
            }
            x = document.getElementById('minOutsideAir').selectedIndex;
            if (x == 0) {
                cv.minOutsideAir.none.isUsed = true;

            } else if (x == 1) {

                cv.minOutsideAir.differentialCO2.isUsed = true;

            } else if (x == 2) {

                cv.minOutsideAir.returnSpaceCO2.isUsed = true;
            }
            x = document.getElementById('humidityControl');
            if (x.checked == true) {
                cv.humidityControl.isUsed = true;
            } else {
                cv.humidityControl.isUsed = false;
            }
            x = document.getElementById('humidifier').selectedIndex;
            if (x == 0) {
                cv.humidifier.none.isUsed = true;

            } else if (x == 1) {

                cv.humidifier.SS.isUsed = true;

            } else if (x == 2) {

                cv.humidifier.sSAndModulation.isUsed = true;
            }
            x = document.getElementById('RARH');
            if (x.checked == true) {
                cv.RARH.isUsed = true;
            } else {
                cv.RARH.isUsed = false;
            }
            x = document.getElementById('OARH');
            if (x.checked == true) {
                cv.OARH.isUsed = true;
            } else {
                cv.OARH.isUsed = false;
            }
            x = document.getElementById('filterOneMonitoring').selectedIndex;
            if (x == 0) {
                cv.filterOneMonitoring.none.isUsed = true;

            } else if (x == 1) {

                cv.filterOneMonitoring.hours.isUsed = true;

            } else if (x == 2) {

                cv.filterOneMonitoring.status.isUsed = true;

            } else if (x == 3) {

                cv.filterOneMonitoring.differentialPressure.isUsed = true;
            }
            x = document.getElementById('filterTwoMonitoring').selectedIndex;
            if (x == 0) {
                cv.filterTwoMonitoring.none.isUsed = true;

            } else if (x == 1) {

                cv.filterTwoMonitoring.hours.isUsed = true;

            } else if (x == 2) {

                cv.filterTwoMonitoring.status.isUsed = true;

            } else if (x == 3) {

                cv.filterTwoMonitoring.differentialPressure.isUsed = true;
            }
            console.log(JSON.stringify(cv));
            localStorage.setItem('ahu', JSON.stringify(cv));

        });
    }


    document.getElementById('heating').onchange = function () {
        var face = document.getElementById('faceAndBypassDampers');
        var cool = document.getElementById('cooling');
        if (this.selectedIndex == 15) {

            var y = face.length;
            var w = cool.length;
            var a = 0;
            face.selectedIndex = 1;
            for (a; a < y; a++) {
                if (a != 1) {
                    face.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 4) {
                    cool.options[a].disabled = true;
                }
            }

        } else if (this.selectedIndex == 16) {
            var y = face.length;
            var w = cool.length;
            var a = 0;
            face.selectedIndex = 2;
            for (a; a < y; a++) {
                if (a != 2) {
                    face.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 5) {
                    cool.options[a].disabled = true;
                }
            }
        } else if (this.selectedIndex == 19) {
            var y = face.length;
            var w = cool.length;
            var a = 1;
            face.selectedIndex = 1;
            for (a; a < y; a++) {
                if (a != 1) {
                    face.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 4) {
                    cool.options[a].disabled = true;
                }
            }
        } else if (this.selectedIndex== 20) {
            var y = face.length;
            var w = cool.length;
            var a = 0;
            face.selectedIndex = 2;
            for (a; a < y; a++) {
                if (a != 2) {
                    face.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 5) {
                    cool.options[a].disabled = true;
                }
            }
        } else {
            var y = face.length;
            var w = cool.length;
            var a = 0;
            face.selectedIndex = 0
            for (a; a < y; a++) {

                face.options[a].disabled = false;

            }
            for (a = 1; a < w; a++) {

                cool.options[a].disabled = false;

            }
        }
    };

    document.getElementById('faceAndBypassDampers').onchange = function () {
        var x = document.getElementById('faceAndBypassDampers').selectedIndex;
        var cool = document.getElementById('cooling');
        var heat = document.getElementById('heating');
        if (this.selectedIndex == 1) {
            var y = heat.length;
            var w = cool.length;
            var a = 1;
            for (a; a < y; a++) {
                if (a != 15 && a != 19) {
                    heat.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 4) {
                    cool.options[a].disabled = true;
                }
            }

        } else if (this.selectedIndex == 2) {
            var y = heat.length;
            var w = cool.length;
            var a = 1;
            for (a; a < y; a++) {
                if (a == 16 && a == 20) {
                    heat.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 5) {
                    cool.options[a].disabled = true;
                }
            }
        } else  {
            var y = heat.length;
            var w = cool.length;
            var a = 1;
            for (a; a < y; a++) {

                heat.options[a].disabled = false;

            }
            for (a = 1; a < w; a++) {

                cool.options[a].disabled = false;

            }
        }
    };

    document.getElementById('cooling').onchange = function () {
        var heat = document.getElementById('heating');
        var face = document.getElementById('faceAndBypassDampers');
        if (this.selectedIndex == 4) {
            var y = heat.length;
            var w = face.length;
            var a = 1;
            face.selectedIndex = 1;
            for (a; a < y; a++) {
                if ((a == 15) || (a == 19)) {
                    heat.options[a].disabled = false;
                }else{
                    heat.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 1) {
                    face.options[a].disabled = true;
                }
            }

        } else if (this.selectedIndex == 5) {
            var y = heat.length;
            var w = face.length;
            var a = 1;
            face.selectedIndex = 2;
            for (a; a < y; a++) {
                if ((a == 16 )||(a == 20)) {
                    heat.options[a].disabled = false;
                }else{
                    heat.options[a].disabled = true;
                }
            }
            for (a = 1; a < w; a++) {
                if (a != 2) {
                    face.options[a].disabled = true;
                }
            }
        } else {
            var y = heat.length;
            var w = face.length;
            var a = 0;
            face.selectedIndex = 0;
            for (a; a < y; a++) {

                heat.options[a].disabled = false;

            }
            for (a = 0; a < w; a++) {

                face.options[a].disabled = false;

            }
        }
    };

    document.getElementById('humidityControl').onchange = function () {
        var cool = document.getElementById('cooling');
        var x = cool.length;
        var a = 1;
        if (this.checked == true) {
            cool.options[0].disabled = true;
            for (a; a < x; a++) {
                cool.options[a].disabled = false;
            }
            alert("Must choose a cooling option!!!!");
        }else{
            cool.options[0].disabled = false;
        }
    };

    document.getElementById('minOutsideAir').onchange = function () {
        var x = this.selectedIndex;
        if (x != 0) {
            var node = document.getElementById('mixedAirDamper');
            node.options[0].disabled = true;
            alert("must choose mixed air control!");
        } else {
            var node = document.getElementById('mixedAirDamper');
            node.options[0].disabled = false;
        }
    };

    document.getElementById('returnFan').onchange = function(){
        if(this.selectedIndex != 0){
            document.getElementById('exhaustFan').disabled = true;
        }else{
            document.getElementById('exhaustFan').disabled = false;
        }
    };

    document.getElementById('exhaustFan').onchange = function(){
        if(this.selectedIndex != 0){
            document.getElementById('returnFan').disabled = true;
        }else{
            document.getElementById('returnFan').disabled = false;
        }
    };
</script>

</html>